// –î–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
const products = {
    1: {
        name: "–°–≤–∏—Ç—à–æ—Ç Hermes",
        brand: "hermes",
        price: 129,
        description: "–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Å–≤–∏—Ç—à–æ—Ç –æ—Ç Hermes —Å —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º. –ö–∞—á–µ—Å—Ç–≤–æ 1:1. –ò–¥–µ–∞–ª—å–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞ –∏ –∫–æ–º—Ñ–æ—Ä—Ç.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Ö–ª–æ–ø–æ–∫",
            "–ö–∞—á–µ—Å—Ç–≤–æ 1:1",
            "–§–∏—Ä–º–µ–Ω–Ω–∞—è –±–∏—Ä–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞",
            "–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã: S, M, L, XL"
        ],
        images: [
            "hermeshud1.jpg",
            "hermeshud2.jpg",
            "hermeshud3.jpg",
            "hermeshud4.jpg",
            "hermeshud5.jpg",
            "hermeshud6.jpg",
        ]
    },
    2: {
        name: "–°–≤–∏—Ç—à–æ—Ç Burberry",
        brand: "burberry",
        price: 114,
        description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–≤–∏—Ç—à–æ—Ç Burberry —Å —É–∑–Ω–∞–≤–∞–µ–º—ã–º –∫–ª–µ—Ç—á–∞—Ç—ã–º —É–∑–æ—Ä–æ–º. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—à–∏–≤–∞.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ö–ª–æ–ø–æ–∫",
            "–£–∑–Ω–∞–≤–∞–µ–º—ã–π –∫–ª–µ—Ç—á–∞—Ç—ã–π —É–∑–æ—Ä",
            "–§–∏—Ä–º–µ–Ω–Ω–∞—è –±–∏—Ä–∫–∞",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–°–í–ò–¢–®–û–¢–´ BURBERRY1.jpg",
            "–°–í–ò–¢–®–û–¢–´ BURBERRY2.jpg",
            "–°–í–ò–¢–®–û–¢–´ BURBERRY3.jpg",
            "–°–í–ò–¢–®–û–¢–´ BURBERRY4.jpg",
            "–°–í–ò–¢–®–û–¢–´ BURBERRY5.jpg",
            "–°–í–ò–¢–®–û–¢–´ BURBERRY6.jpg",
            "–°–í–ò–¢–®–û–¢–´ BURBERRY7.jpg"
        ]
    },
    3: {
        name: "–°–≤–∏—Ç—à–æ—Ç Lacoste",
        brand: "lacoste",
        price: 98,
        description: "–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Å–≤–∏—Ç—à–æ—Ç Lacoste —Å —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º –∫—Ä–æ–∫–æ–¥–∏–ª–æ–º. –£–¥–æ–±—Å—Ç–≤–æ –∏ —Å—Ç–∏–ª—å –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: —Ö–ª–æ–ø–æ–∫ —Å –Ω–µ–±–æ–ª—å—à–∏–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —ç–ª–∞—Å—Ç–∞–Ω–∞",
            "–§–∏—Ä–º–µ–Ω–Ω—ã–π –∫—Ä–æ–∫–æ–¥–∏–ª",
            "–ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª1.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª2.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª3.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª4.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª5.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª6.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE–±–µ–ª7.jpg"
        ]
    },
    4: {
        name: "–°–≤–∏—Ç—à–æ—Ç Lacoste —á–µ—Ä–Ω—ã–π",
        brand: "lacoste",
        price: 98,
        description: "–ß–µ—Ä–Ω—ã–π —Å–≤–∏—Ç—à–æ—Ç Lacoste –¥–ª—è —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–≥–æ –∏ —Å—Ç–∏–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞ –ª—é–±–æ–π —Å–ª—É—á–∞–π.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Ö–ª–æ–ø–æ–∫",
            "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç",
            "–§–∏—Ä–º–µ–Ω–Ω—ã–π –∫—Ä–æ–∫–æ–¥–∏–ª",
            "–†–∞–∑–º–µ—Ä—ã: S, M, L, XL"
        ],
        images: [
            "–°–í–ò–¢–®–û–¢–´ LACOSTE—á–µ—Ä1.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE—á–µ—Ä2.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE—á–µ—Ä3.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE—á–µ—Ä4.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOSTE—á–µ—Ä5.jpg",
            "–°–í–ò–¢–®–û–¢–´ LACOST–ï—á–µ—Ä6.jpg",
        ]
    },
    5: {
        name: "–ó–∏–ø–∫–∞ Dior",
        brand: "dior",
        price: 149,
        description: "–°—Ç–∏–ª—å–Ω–∞—è –∑–∏–ø–∫–∞ –æ—Ç Dior —Å —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏. –ö–∞—á–µ—Å—Ç–≤–æ 1:1. –ò–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –º–æ–¥–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–ª–∏—ç—Å—Ç–µ—Ä",
            "–§–∏—Ä–º–µ–Ω–Ω–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞",
            "–ö–∞—á–µ—Å—Ç–≤–æ 1:1",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "DIOR–∑–∏–ø1.jpg",
            "DIOR–∑–∏–ø2.jpg",
            "DIOR–∑–∏–ø3.jpg",
            "DIOR–∑–∏–ø4.jpg",
            "DIOR–∑–∏–ø5.jpg",
            "DIOR–∑–∏–ø6.jpg",
            "DIOR–∑–∏–ø7.jpg",
            "DIOR–∑–∏–ø8.jpg",
            "DIOR–∑–∏–ø9.jpg"
        ]
    },
    6: {
        name: "–õ–æ–Ω–≥—Å–ª–∏–≤ Guess",
        brand: "guess",
        price: 90,
        description: "–ú–æ–¥–Ω—ã–π –ª–æ–Ω–≥—Å–ª–∏–≤ –æ—Ç Guess —Å —É–∑–Ω–∞–≤–∞–µ–º—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º. –ö–æ–º—Ñ–æ—Ä—Ç –∏ —Å—Ç–∏–ª—å –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: —Ö–ª–æ–ø–æ–∫",
            "–£–∑–Ω–∞–≤–∞–µ–º—ã–π –ª–æ–≥–æ—Ç–∏–ø Guess",
            "–£–¥–æ–±–Ω—ã–π –∫—Ä–æ–π",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–õ–æ–Ω–≥guess1.jpg",
            "–õ–æ–Ωgguess2.jpg",
            "–õ–æ–Ωgguess3.jpg",
            "–õ–æ–Ωgguess4.jpg",
            "–õ–æ–Ωgguess5.jpg",
            "–õ–æ–Ωgguess6.jpg",
            "–õ–æ–Ωgguess7.jpg"
        ]
    },
    7: {
        name: "–õ–æ–Ω–≥—Å–ª–∏–≤ Guess —á–µ—Ä–Ω—ã–π",
        brand: "guess",
        price: 90,
        description: "–ú–æ–¥–Ω—ã–π –ª–æ–Ω–≥—Å–ª–∏–≤ –æ—Ç Guess —Å —É–∑–Ω–∞–≤–∞–µ–º—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º. –ö–æ–º—Ñ–æ—Ä—Ç –∏ —Å—Ç–∏–ª—å –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: —Ö–ª–æ–ø–æ–∫",
            "–£–∑–Ω–∞–≤–∞–µ–º—ã–π –ª–æ–≥–æ—Ç–∏–ø Guess",
            "–£–¥–æ–±–Ω—ã–π –∫—Ä–æ–π",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–õ–æ–Ωgguess—á–µ—Ä1.jpg",
            "–õ–æ–Ωgguess—á–µ—Ä2.jpg",
            "–õ–æ–Ωgguess—á–µ—Ä3.jpg",
            "–õ–æ–Ωgguess—á–µ—Ä4.jpg",
            "–õ–æ–Ωgguess—á–µ—Ä5.jpg",
            "–õ–æ–Ωgguess—á–µ—Ä6.jpg",
            "–õ–æ–Ωgguess—á–µ—Ä7.jpg"
        ]
    },
    8: {
        name: "–ñ–∏–ª–µ—Ç–∫–∞ Corteiz",
        brand: "corteiz",
        price: 139,
        description: "–£–ª–∏—á–Ω–∞—è –∂–∏–ª–µ—Ç–∫–∞ Corteiz –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞. –ö–∞—á–µ—Å—Ç–≤–æ 1:1. –°—Ç–∏–ª—å –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –Ω–µ–π–ª–æ–Ω",
            "–í–æ–¥–æ–æ—Ç—Ç–∞–ª–∫–∏–≤–∞—é—â–∞—è –ø—Ä–æ–ø–∏—Ç–∫–∞",
            "–ù–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä–º–∞–Ω–æ–≤",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "photo_2025-07-01_17-31-38.jpg",
            "CORTEIZjil2.jpg",
            "CORTEIZjil3.jpg",
            "CORTEIZjil4.jpg",
            "CORTEIZjil5.jpg",
            "CORTEIZjil6.jpg",
            "CORTEIZjil7.jpg"
        ]
    },
    9: {
        name: "–ñ–∏–ª–µ—Ç–∫–∞ Jordan & Supreme",
        brand: "jordan",
        price: 169,
        description: "–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è Jordan –∏ Supreme. –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏ –≤—ã—Å—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ. –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –≥–∞—Ä–¥–µ—Ä–æ–±–∞.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –ø–æ–ª–∏—ç—Å—Ç–µ—Ä",
            "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏",
            "–§–∏—Ä–º–µ–Ω–Ω—ã–µ –ª–æ–≥–æ—Ç–∏–ø—ã",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª1.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª2.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª3.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª4.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª5.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª6.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò JORDAN & SUPREME–±–µ–ª7.jpg"
        ]
    },
    10: {
        name: "–ñ–∏–ª–µ—Ç–∫–∞ Nike ACG",
        brand: "nike",
        price: 124,
        description: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∂–∏–ª–µ—Ç–∫–∞ Nike ACG –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ –∏ –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Å—Ç–∏–ª—è. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–∞—è —Ç–∫–∞–Ω—å Nike",
            "–í–æ–¥–æ–æ—Ç—Ç–∞–ª–∫–∏–≤–∞—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞",
            "–°–≤–µ—Ç–æ–æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg1.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg2.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg3.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg4.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg5.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg6.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò NIKEasg7.jpg"
        ]
    },
    11: {
        name: "–ñ–∏–ª–µ—Ç–∫–∞ Polo Ralph Lauren",
        brand: "polo",
        price: 119,
        description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∂–∏–ª–µ—Ç–∫–∞ Polo Ralph Lauren. –≠–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∏–ª–µ–π.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: —Ö–ª–æ–ø–æ–∫/–Ω–µ–π–ª–æ–Ω",
            "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω",
            "–§–∏—Ä–º–µ–Ω–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø",
            "–†–∞–∑–º–µ—Ä—ã: S, M, L, XL"
        ],
        images: [
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN1.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN2.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN3.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN4.jpg",
            "–ñ–∏–õ–ï–¢–ö–ò POLO RALPH LAUREN5.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN6.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN7.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò POLO RALPH LAUREN8.jpg"
        ]
    },
    12: {
        name: "–ñ–∏–ª–µ—Ç–∫–∞ Prada",
        brand: "prada",
        price: 189,
        description: "–†–æ—Å–∫–æ—à–Ω–∞—è –∂–∏–ª–µ—Ç–∫–∞ –æ—Ç Prada. –ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –∏–¥–µ–∞–ª—å–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞. –í—ã—Å—à–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–∞—á–µ—Å—Ç–≤–∞.",
        features: [
            "–ú–∞—Ç–µ—Ä–∏–∞–ª: –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
            "–ò–¥–µ–∞–ª—å–Ω–∞—è –ø–æ—Å–∞–¥–∫–∞",
            "–§–∏—Ä–º–µ–Ω–Ω–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞",
            "–†–∞–∑–º–µ—Ä—ã: M, L"
        ],
        images: [
            "–ñ–ò–õ–ï–¢–ö–ò PRADA1.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò PRADA2.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò PRADA3.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò PRADA4.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò PRADA5.jpg",
            "–ñ–ò–õ–ï–¢–ö–ò PRADA6.jpg",
        ]
    }
};

// –ö–æ—Ä–∑–∏–Ω–∞
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
let currentPage = 1;
const productsPerPage = 8;
let scrollPosition = 0;

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', function() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    initApp();

    // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–ª–æ–∞–¥–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
    window.addEventListener('load', function() {
        setTimeout(function() {
            document.getElementById('preloader').style.display = 'none';
        }, 1000);
    });
});

function initApp() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    initCart();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    initCategories();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
    initModals();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    initQuickView();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
    initAddToCartButtons();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
    initAdvantageModals();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    initImageLoading();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    initPagination();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è touch events –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
    initTouchEvents();

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    updateCartCount();
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞
    initSearch();
    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    preloadProductImages();
}

// –ö–û–†–ó–ò–ù–ê
function initCart() {
    updateCartCount();

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    document.getElementById('cart-toggle').addEventListener('click', function() {
        document.getElementById('cart-sidebar').classList.add('active');
        document.getElementById('overlay').classList.add('active');
        document.body.style.overflow = 'hidden';
        renderCartItems();
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    document.querySelector('.close-btn').addEventListener('click', function() {
        document.getElementById('cart-sidebar').classList.remove('active');
        document.getElementById('overlay').classList.remove('active');
        document.body.style.overflow = 'auto';
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
    document.getElementById('order-btn').addEventListener('click', function() {
        if (cart.length === 0) {
            showToast('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞', 'error');
            return;
        }

        const orderText = generateOrderText();
        const telegramUsername = 'bigdigovich';
        const encodedText = encodeURIComponent(orderText);

        // –û—Ç–∫—Ä—ã–≤–∞–µ–º Telegram —Å –∑–∞–∫–∞–∑–æ–º
        openTelegramLink(encodedText, telegramUsername);

        // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        renderCartItems();

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        showToast('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –∫–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞', 'success');
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑"
    document.getElementById('copy-order-btn').addEventListener('click', function() {
        if (cart.length === 0) {
            showToast('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞', 'error');
            return;
        }

        const orderText = generateOrderText();

        // –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(orderText)
                .then(() => {
                    showToast('–ó–∞–∫–∞–∑ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                })
                .catch(err => {
                    // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                    copyToClipboardFallback(orderText);
                });
        } else {
            // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
            copyToClipboardFallback(orderText);
        }
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
    document.querySelectorAll('.payment-method').forEach(method => {
        method.addEventListener('click', function() {
            // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
            document.querySelectorAll('.payment-method').forEach(m => {
                m.classList.remove('selected');
            });

            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥
            this.classList.add('selected');

            // –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º radio-–∫–Ω–æ–ø–∫—É
            const radio = this.querySelector('input[type="radio"]');
            if (radio) {
                radio.checked = true;
            }
        });
    });
}

// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è Telegram
function openTelegramLink(encodedText, username) {
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    const telegramUrl = `https://t.me/${username}?text=${encodedText}`;

    if (isMobile) {
        // –ü—Ä–æ–±—É–µ–º –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram
        const appUrl = `tg://resolve?domain=${username}&text=${encodedText}`;

        // –°–æ–∑–¥–∞–µ–º iframe –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = appUrl;
        document.body.appendChild(iframe);

        // –¢–∞–π–º–∞—É—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –æ—Ç–∫—Ä—ã–ª–æ—Å—å –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        let appOpened = false;
        const timeout = setTimeout(() => {
            if (!appOpened) {
                // –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–µ–±-–≤–µ—Ä—Å–∏—é
                window.location.href = telegramUrl;
            }
            document.body.removeChild(iframe);
        }, 500);

        // –°–æ–±—ã—Ç–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–ª–æ—Å—å
        window.addEventListener('blur', function onBlur() {
            appOpened = true;
            clearTimeout(timeout);
            window.removeEventListener('blur', onBlur);
            document.body.removeChild(iframe);
        });
    } else {
        // –ù–∞ –ü–ö —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–µ–±-–≤–µ—Ä—Å–∏—é
        window.open(telegramUrl, '_blank');
    }
}

// Fallback –º–µ—Ç–æ–¥ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
function copyToClipboardFallback(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.opacity = '0';
    document.body.appendChild(textArea);
    textArea.select();

    try {
        const successful = document.execCommand('copy');
        if (successful) {
            showToast('–ó–∞–∫–∞–∑ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
        } else {
            showToast('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑', 'error');
        }
    } catch (err) {
        showToast('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑', 'error');
    }

    document.body.removeChild(textArea);
}

function addToCart(productId, size = 'M') {
    const product = products[productId];
    if (!product) return;

    const existingItemIndex = cart.findIndex(item =>
        item.id === productId && item.size === size
    );

    if (existingItemIndex !== -1) {
        cart[existingItemIndex].quantity += 1;
    } else {
        cart.push({
            id: productId,
            name: product.name,
            price: product.price,
            size: size,
            quantity: 1,
            image: product.images[0]
        });
    }

    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    showToast('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É');

    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ—Ä–∑–∏–Ω—É –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
    if (document.getElementById('cart-sidebar').classList.contains('active')) {
        renderCartItems();
    }
}

function removeFromCart(index) {
    if (index >= 0 && index < cart.length) {
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        renderCartItems();
        showToast('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã');
    }
}

function updateCartCount() {
    const count = cart.reduce((total, item) => total + item.quantity, 0);
    const cartBadge = document.getElementById('cart-count');

    if (cartBadge) {
        cartBadge.textContent = count;

        // –ê–Ω–∏–º–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞
        cartBadge.classList.add('pulse');
        setTimeout(() => {
            cartBadge.classList.remove('pulse');
        }, 500);
    }
}

function updateQuantity(index, change) {
    if (index >= 0 && index < cart.length) {
        const newQuantity = cart[index].quantity + change;

        if (newQuantity < 1) {
            removeFromCart(index);
            return;
        }

        cart[index].quantity = newQuantity;
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        renderCartItems();
    }
}

function renderCartItems() {
    const cartContent = document.getElementById('cart-content');
    const cartTotal = document.getElementById('cart-total-price');

    if (!cartContent) return;

    if (cart.length === 0) {
        cartContent.innerHTML = `
            <div class="cart-empty">
                <i class="fas fa-shopping-basket"></i>
                <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
            </div>
        `;
        if (cartTotal) cartTotal.textContent = '0 BYN';
        return;
    }

    let total = 0;
    let itemsHTML = '';

    cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        itemsHTML += `
            <div class="cart-item">
                <img src="${item.image}" alt="${item.name}" class="cart-item-image" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjQwIiB5PSI0MCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjNjQ2NDY0Ij5ObyBpbWFnZTwvdGV4dD4KPC9zdmc+'>">
                <div class="cart-item-details">
                    <div class="cart-item-name">${item.name}</div>
                    <div class="cart-item-price">${item.price} BYN √ó ${item.quantity} = ${itemTotal} BYN</div>
                    <div class="cart-item-size">–†–∞–∑–º–µ—Ä: ${item.size}</div>
                    <div class="cart-item-actions">
                        <div class="quantity-control">
                            <button class="quantity-btn" onclick="updateQuantity(${index}, -1)">-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">+</button>
                        </div>
                        <button class="remove-item" onclick="removeFromCart(${index})">
                            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        `;
    });

    cartContent.innerHTML = itemsHTML;
    if (cartTotal) cartTotal.textContent = `${total} BYN`;
}

function generateOrderText() {
    // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
    const selectedPayment = document.querySelector('input[name="payment-method"]:checked');
    const paymentMethod = selectedPayment ? selectedPayment.value : '–ù–∞–ª–∏—á–Ω—ã–µ';

    let text = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑:\n\n";
    let total = 0;

    cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        text += `- ${item.name} (–†–∞–∑–º–µ—Ä: ${item.size}) - ${item.quantity} —à—Ç. √ó ${item.price} BYN = ${itemTotal} BYN\n`;
    });

    text += `\n–ò—Ç–æ–≥–æ: ${total} BYN`;
    text += `\nüí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: ${paymentMethod}`;
    text += "\n\n–°–ø–∞—Å–∏–±–æ!";
    return text;
}

// –ö–ê–¢–ï–ì–û–†–ò–ò
function initCategories() {
    const categoryElements = document.querySelectorAll('.category');
    const productCards = document.querySelectorAll('.product-card');
    const categoriesContainer = document.querySelector('.categories');
    const scrollLeftBtn = document.querySelector('.scroll-left');
    const scrollRightBtn = document.querySelector('.scroll-right');

    // –§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    function filterProducts(category) {
        productCards.forEach(card => {
            const cardCategory = card.dataset.category;

            if (category === '–≤—Å–µ' || cardCategory === category) {
                card.style.display = 'block';
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 50);
            } else {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.display = 'none';
                }, 300);
            }
        });
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    categoryElements.forEach(categoryEl => {
        categoryEl.addEventListener('click', function() {
            const selectedCategory = this.dataset.category;

            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –≤—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
            categoryElements.forEach(el => el.classList.remove('active'));
            this.classList.add('active');

            // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã
            filterProducts(selectedCategory);
        });
    });

    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    if (scrollLeftBtn && scrollRightBtn) {
        scrollRightBtn.addEventListener('click', () => {
            categoriesContainer.scrollBy({ left: 200, behavior: 'smooth' });
        });

        scrollLeftBtn.addEventListener('click', () => {
            categoriesContainer.scrollBy({ left: -200, behavior: 'smooth' });
        });
    }

    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–í—Å–µ" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const allCategory = document.querySelector('.category[data-category="–≤—Å–µ"]');
    if (allCategory) {
        allCategory.classList.add('active');
    }
}

// –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê
function initModals() {
    const contactBtn = document.getElementById('contact-btn');
    const contactModal = document.getElementById('contact-modal');
    const overlay = document.getElementById('overlay');
    const closeModalBtn = document.querySelector('.close-modal');

    if (contactBtn && contactModal) {
        contactBtn.addEventListener('click', function() {
            contactModal.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
    }

    if (closeModalBtn) {
        closeModalBtn.addEventListener('click', function() {
            contactModal.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
    }

    if (overlay) {
        overlay.addEventListener('click', function() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            document.getElementById('cart-sidebar').classList.remove('active');
            this.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
    }
}

// –ë–´–°–¢–†–´–ô –ü–†–û–°–ú–û–¢–†
function initQuickView() {
    const quickViewButtons = document.querySelectorAll('.quick-view');
    const backToProductsBtn = document.getElementById('back-to-products');

    quickViewButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.stopPropagation();

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            scrollPosition = window.scrollY;

            const productId = this.dataset.product;
            showProductDetail(productId);
        });
    });

    if (backToProductsBtn) {
        backToProductsBtn.addEventListener('click', function() {
            document.getElementById('product-detail').classList.remove('active');
            document.body.style.overflow = 'auto';

            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            window.scrollTo(0, scrollPosition);
        });
    }

    const detailAddToCartBtn = document.getElementById('detail-add-to-cart');
    if (detailAddToCartBtn) {
        detailAddToCartBtn.addEventListener('click', function() {
            const productId = this.dataset.productId;
            const selectedSize = document.querySelector('.size-option.selected')?.dataset.size || 'M';

            addToCart(productId, selectedSize);

            this.classList.add('added');
            this.innerHTML = '<i class="fas fa-check"></i> –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É';

            setTimeout(() => {
                this.classList.remove('added');
                this.innerHTML = '<i class="fas fa-shopping-cart"></i> –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É';
            }, 2000);
        });
    }
}

function showProductDetail(productId) {
    const product = products[productId];
    if (!product) return;

    const productDetailPage = document.getElementById('product-detail');
    const mainImage = document.getElementById('main-product-image');
    const thumbnailsContainer = document.querySelector('.product-thumbnails');
    const productName = document.getElementById('detail-product-name');
    const productPrice = document.getElementById('detail-product-price');
    const productDesc = document.getElementById('detail-product-desc');
    const featuresList = document.getElementById('detail-features');
    const addToCartBtn = document.getElementById('detail-add-to-cart');

    if (!productDetailPage || !mainImage || !productName) return;

    productName.textContent = product.name;
    productPrice.textContent = `${product.price} BYN`;
    productDesc.textContent = product.description;

    // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    mainImage.src = product.images[0];
    mainImage.alt = product.name;
    mainImage.style.opacity = 1; // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ

    if (thumbnailsContainer) {
        thumbnailsContainer.innerHTML = '';
        product.images.forEach((image, index) => {
            const thumbnail = document.createElement('img');
            thumbnail.src = image;
            thumbnail.alt = `${product.name} - –≤–∏–¥ ${index + 1}`;
            thumbnail.classList.add('thumbnail');
            thumbnail.loading = 'lazy';
            thumbnail.onerror = function() {
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCA3MCA3MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjM1IiB5PSIzNSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1iZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjNjQ2NDY0Ij5ObyBpbWFnZTwvdGV4dD4KPC9zdmc+';
            };

            if (index === 0) {
                thumbnail.classList.add('active');
            }

            thumbnail.addEventListener('click', function() {
                mainImage.src = this.src;
                document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                mainImage.style.opacity = 0;
                setTimeout(() => {
                    mainImage.style.opacity = 1;
                }, 100);
            });

            thumbnailsContainer.appendChild(thumbnail);
        });
    }

    if (featuresList) {
        featuresList.innerHTML = '';
        product.features.forEach(feature => {
            const li = document.createElement('li');
            li.textContent = feature;
            featuresList.appendChild(li);
        });
    }

    if (addToCartBtn) {
        addToCartBtn.dataset.productId = productId;
    }

    document.querySelectorAll('.size-option').forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.size === 'M') {
            option.classList.add('selected');
        }
    });

    productDetailPage.classList.add('active');
    document.body.style.overflow = 'hidden';
    window.scrollTo(0, 0);

    document.querySelectorAll('.size-option').forEach(option => {
        option.addEventListener('click', function() {
            document.querySelectorAll('.size-option').forEach(o => o.classList.remove('selected'));
            this.classList.add('selected');
        });
    });
}

// –ö–ù–û–ü–ö–ò –î–û–ë–ê–í–õ–ï–ù–ò–Ø –í –ö–û–†–ó–ò–ù–£
function initAddToCartButtons() {
    document.querySelectorAll('.add-to-cart-btn').forEach(button => {
        button.addEventListener('click', function(e) {
            e.stopPropagation();

            const productCard = this.closest('.product-card');
            if (!productCard) return;

            // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ —Ç–æ–π –∂–µ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞
            const quickViewBtn = productCard.querySelector('.quick-view');
            if (!quickViewBtn) return;

            // –ü–æ–ª—É—á–∞–µ–º ID –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–∞ –∫–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            const productId = quickViewBtn.dataset.product;
            if (!productId || !products[productId]) return;

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ—Ä–∑–∏–Ω—É
            addToCart(productId);

            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
            const originalHtml = this.innerHTML;
            this.classList.add('added');
            this.innerHTML = '<i class="fas fa-check"></i> –î–æ–±–∞–≤–ª–µ–Ω–æ';

            setTimeout(() => {
                this.classList.remove('added');
                this.innerHTML = originalHtml;
            }, 2000);
        });
    });
}

// –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –ü–†–ï–ò–ú–£–©–ï–°–¢–í
function initAdvantageModals() {
    const features = document.querySelectorAll('.feature');
    const modals = {
        'üöö': 'delivery-modal',
        'üèÖ': 'quality-modal',
        'üè∑Ô∏è': 'prices-modal'
    };

    features.forEach(feature => {
        feature.addEventListener('click', function() {
            const emoji = this.querySelector('.emoji-icon').textContent.trim();
            const modalId = modals[emoji];

            if (modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            }
        });
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
    document.querySelectorAll('.close-advantage-modal').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.advantage-modal').forEach(modal => {
                modal.classList.remove('active');
            });
            document.body.style.overflow = 'auto';
        });
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    document.querySelectorAll('.advantage-modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            document.querySelectorAll('.advantage-modal').forEach(modal => {
                modal.classList.remove('active');
            });
            document.body.style.overflow = 'auto';
        }
    });
}

// TOUCH EVENTS –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–•
function initTouchEvents() {
    let touchStartY = 0;
    const scrollThreshold = 5; // –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞

    const quickViewButtons = document.querySelectorAll('.quick-view');

    quickViewButtons.forEach(button => {
        button.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        button.addEventListener('touchmove', function(e) {
            const currentY = e.touches[0].clientY;
            const deltaY = Math.abs(currentY - touchStartY);

            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫—Ä–æ–ª–ª–∏—Ç, –æ—Ç–º–µ–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
            if (deltaY > scrollThreshold) {
                this.style.opacity = '0.5'; // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            }
        }, { passive: true });

        button.addEventListener('touchend', function(e) {
            const touchEndY = e.changedTouches[0].clientY;
            const deltaY = Math.abs(touchEndY - touchStartY);

            // –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª —Ç–∞–ø, –∞ –Ω–µ —Å–∫—Ä–æ–ª–ª
            if (deltaY <= scrollThreshold) {
                e.preventDefault();
                e.stopPropagation();

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
                scrollPosition = window.scrollY;

                const productId = this.dataset.product;
                showProductDetail(productId);
            }

            this.style.opacity = '1';
        });
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–æ–≤ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    document.addEventListener('DOMContentLoaded', function() {
        const productDetail = document.getElementById('product-detail');
        if (!productDetail) return;

        let touchStartX = 0;
        let touchEndX = 0;

        productDetail.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
        }, { passive: true });

        productDetail.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].clientX;
            const deltaX = touchEndX - touchStartX;

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–≤–∞–π–ø –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ
            if (Math.abs(deltaX) > 50) { // –ü–æ—Ä–æ–≥ –¥–ª—è —Å–≤–∞–π–ø–∞
                const mainImage = document.getElementById('main-product-image');
                const thumbnails = document.querySelectorAll('.thumbnail');
                let currentIndex = 0;

                // –ù–∞—Ö–æ–¥–∏–º —Ç–µ–∫—É—â–µ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                thumbnails.forEach((thumb, index) => {
                    if (thumb.classList.contains('active')) {
                        currentIndex = index;
                    }
                });

                if (deltaX > 0) { // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    const prevIndex = (currentIndex - 1 + thumbnails.length) % thumbnails.length;
                    thumbnails[prevIndex].click();
                } else { // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    const nextIndex = (currentIndex + 1) % thumbnails.length;
                    thumbnails[nextIndex].click();
                }
            }
        }, { passive: true });
    });
}

// –ó–ê–ì–†–£–ó–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô
function initImageLoading() {
    const images = document.querySelectorAll('img[loading="lazy"]');

    // –°–æ–∑–¥–∞–µ–º Intersection Observer –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                const src = img.getAttribute('data-src') || img.src;

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                loadImageWithPriority(src).then(() => {
                    img.src = src;
                    img.setAttribute('data-loaded', 'true');
                    observer.unobserve(img);
                }).catch(() => {
                    img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjNjQ2NDY0Ij5ObyBpbWFnZTwvdGV4dD4KPC9zdmc+';
                });
            }
        });
    }, {
        rootMargin: '200px 0px', // –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ
        threshold: 0.01
    });

    // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –≤—Å–µ–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
    images.forEach(img => {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π src –≤ data-src
        if (!img.hasAttribute('data-src')) {
            img.setAttribute('data-src', img.src);
            img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjwvc3ZnPg==';
        }
        imageObserver.observe(img);
    });
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
function loadImageWithPriority(src) {
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => resolve();
        img.onerror = () => reject();
        img.src = src;

        // –¢–∞–π–º–∞—É—Ç –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –≤–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            if (!img.complete) reject();
        }, 10000);
    });
}

// –ü–ê–ì–ò–ù–ê–¶–ò–Ø
function initPagination() {
    const productsContainer = document.querySelector('.products-grid');
    const paginationContainer = document.querySelector('.pagination');

    if (!productsContainer || !paginationContainer) return;

    const allProducts = Array.from(productsContainer.querySelectorAll('.product-card'));
    const totalPages = Math.ceil(allProducts.length / productsPerPage);

    // –°–æ–∑–¥–∞–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é
    function createPagination() {
        paginationContainer.innerHTML = '';

        // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
        const prevBtn = document.createElement('button');
        prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
        prevBtn.classList.add('pagination-btn');
        prevBtn.disabled = currentPage === 1;
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                updateProductsDisplay();
                updatePagination();
                window.scrollTo(0, 0);
            }
        });
        paginationContainer.appendChild(prevBtn);

        // –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
        const startPage = Math.max(1, currentPage - 2);
        const endPage = Math.min(totalPages, startPage + 4);

        for (let i = startPage; i <= endPage; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.textContent = i;
            pageBtn.classList.add('pagination-btn');
            if (i === currentPage) {
                pageBtn.classList.add('active');
            }
            pageBtn.addEventListener('click', () => {
                currentPage = i;
                updateProductsDisplay();
                updatePagination();
                window.scrollTo(0, 0);
            });
            paginationContainer.appendChild(pageBtn);
        }

        // –ö–Ω–æ–ø–∫–∞ "–í–ø–µ—Ä–µ–¥"
        const nextBtn = document.createElement('button');
        nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
        nextBtn.classList.add('pagination-btn');
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages) {
                currentPage++;
                updateProductsDisplay();
                updatePagination();
                window.scrollTo(0, 0);
            }
        });
        paginationContainer.appendChild(nextBtn);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
    function updateProductsDisplay() {
        const startIndex = (currentPage - 1) * productsPerPage;
        const endIndex = startIndex + productsPerPage;

        allProducts.forEach((product, index) => {
            if (index >= startIndex && index < endIndex) {
                product.style.display = 'block';
                setTimeout(() => {
                    product.style.opacity = '1';
                    product.style.transform = 'translateY(0)';
                }, 50);
            } else {
                product.style.opacity = '0';
                product.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    product.style.display = 'none';
                }, 300);
            }
        });
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    function updatePagination() {
        const buttons = paginationContainer.querySelectorAll('.pagination-btn');
        buttons.forEach((button, index) => {
            if (index === 0) return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
            if (index === buttons.length - 1) return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–Ω–æ–ø–∫—É "–í–ø–µ—Ä–µ–¥"

            const pageNum = parseInt(button.textContent);
            button.classList.toggle('active', pageNum === currentPage);
        });

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        buttons[0].disabled = currentPage === 1;
        buttons[buttons.length - 1].disabled = currentPage === totalPages;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    createPagination();
    updateProductsDisplay();
}

// –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
function showToast(message, type = 'success') {
    // –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    const existingToasts = document.querySelectorAll('.toast');
    existingToasts.forEach(toast => {
        toast.remove();
    });

    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.innerHTML = `
        <div class="toast-content">
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
            <span>${message}</span>
        </div>
    `;

    document.body.appendChild(toast);

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
            if (toast.parentNode) {
                toast.parentNode.removeChild(toast);
            }
        }, 300);
    }, 3000);
}
// –ü–û–ò–°–ö
function initSearch() {
    const searchInput = document.getElementById('search-input');
    const searchBtn = document.getElementById('search-btn');
    const clearSearchBtn = document.getElementById('clear-search');
    const searchResults = document.getElementById('search-results');
    const mobileSearchBtn = document.getElementById('mobile-search-btn');
    const searchContainer = document.querySelector('.search-container');

    let searchTimeout;

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
    function searchProducts(query) {
        if (!query.trim()) {
            searchResults.style.display = 'none';
            return;
        }

        const searchTerm = query.toLowerCase().trim();
        const results = [];

        // –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º
        Object.entries(products).forEach(([id, product]) => {
            const nameMatch = product.name.toLowerCase().includes(searchTerm);
            const brandMatch = product.brand.toLowerCase().includes(searchTerm);
            const descMatch = product.description.toLowerCase().includes(searchTerm);
            const categoryMatch = getProductCategory(product).toLowerCase().includes(searchTerm);

            if (nameMatch || brandMatch || descMatch || categoryMatch) {
                results.push({
                    id,
                    ...product,
                    category: getProductCategory(product)
                });
            }
        });

        displaySearchResults(results);
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–∞
    function getProductCategory(product) {
        const name = product.name.toLowerCase();
        if (name.includes('—Å–≤–∏—Ç—à–æ—Ç')) return '—Å–≤–∏—Ç—à–æ—Ç—ã';
        if (name.includes('–ª–æ–Ω–≥—Å–ª–∏–≤')) return '–ª–æ–Ω–≥—Å–ª–∏–≤—ã';
        if (name.includes('–∑–∏–ø–∫')) return '–∑–∏–ø–∫–∏';
        if (name.includes('–∂–∏–ª–µ—Ç–∫')) return '–∂–∏–ª–µ—Ç–∫–∏';
        if (name.includes('—Å—É–º–∫')) return '—Å—É–º–∫–∏';
        return '–¥—Ä—É–≥–æ–µ';
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
    function displaySearchResults(results) {
        searchResults.innerHTML = '';

        if (results.length === 0) {
            searchResults.innerHTML = `
                <div class="search-no-results">
                    <i class="fas fa-search"></i>
                    <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
                    <small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å</small>
                </div>
            `;
        } else {
            results.forEach(product => {
                const resultItem = document.createElement('div');
                resultItem.className = 'search-result-item';
                resultItem.innerHTML = `
                    <img src="${product.images[0]}" alt="${product.name}" class="search-result-image" 
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjI1IiB5PSIyNSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjNjQ2NDY0Ij5ObyBpbWFnZTwvdGV4dD4KPC9zdmc+'">
                    <div class="search-result-info">
                        <div class="search-result-name">${product.name}</div>
                        <div class="search-result-price">${product.price} BYN</div>
                        <div class="search-result-category">${product.category}</div>
                    </div>
                `;

                resultItem.addEventListener('click', () => {
                    showProductDetail(product.id);
                    searchResults.style.display = 'none';
                    searchInput.value = '';
                    clearSearchBtn.style.display = 'none';
                });

                searchResults.appendChild(resultItem);
            });
        }

        searchResults.style.display = 'block';
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    searchInput.addEventListener('input', function(e) {
        clearTimeout(searchTimeout);
        const query = e.target.value;

        if (query) {
            clearSearchBtn.style.display = 'block';
        } else {
            clearSearchBtn.style.display = 'none';
            searchResults.style.display = 'none';
            return;
        }

        searchTimeout = setTimeout(() => {
            searchProducts(query);
        }, 300);
    });

    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchProducts(this.value);
        }
    });

    searchBtn.addEventListener('click', () => {
        searchProducts(searchInput.value);
    });

    clearSearchBtn.addEventListener('click', () => {
        searchInput.value = '';
        searchResults.style.display = 'none';
        clearSearchBtn.style.display = 'none';
        searchInput.focus();
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏ –ø–æ–∏—Å–∫–∞
    document.addEventListener('click', function(e) {
        if (!searchContainer.contains(e.target) &&
            !mobileSearchBtn?.contains(e.target)) {
            searchResults.style.display = 'none';

            // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å—é –ø–æ–∏—Å–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å
            if (window.innerWidth <= 768) {
                searchContainer.classList.remove('active');
            }
        }
    });

    // –ú–æ–±–∏–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
    if (mobileSearchBtn && searchContainer) {
        mobileSearchBtn.addEventListener('click', () => {
            searchContainer.classList.toggle('active');
            if (searchContainer.classList.contains('active')) {
                searchInput.focus();
            }
        });
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∏—Å–∫–∞
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            searchResults.style.display = 'none';
            if (window.innerWidth <= 768) {
                searchContainer.classList.remove('active');
            }
        }
    });
}
// –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
function preloadProductImages() {
    const allImages = [];

    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    Object.values(products).forEach(product => {
        product.images.forEach(image => {
            allImages.push(image);
        });
    });

    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    allImages.forEach(imageSrc => {
        const img = new Image();
        img.src = imageSrc;
        img.onerror = function() {
            console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:', imageSrc);
        };
    });

    console.log('–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:', allImages.length);
}
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.addEventListener('load', function() {
    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —Ç–µ–∫—É—â–µ–π viewport
    preloadVisibleImages();

    // –ó–∞–ø—É—Å–∫–∞–µ–º –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É
    initImageLoading();
});

function preloadVisibleImages() {
    const viewportImages = document.querySelectorAll('.product-card:not([style*="display: none"]) img');
    viewportImages.forEach(img => {
        const src = img.getAttribute('data-src');
        if (src) {
            const preloadImg = new Image();
            preloadImg.src = src;
        }
    });
}
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ HTML
window.addToCart = addToCart;
window.removeFromCart = removeFromCart;
window.updateQuantity = updateQuantity;
window.showProductDetail = showProductDetail;
window.openTelegramLink = openTelegramLink;
window.copyToClipboardFallback = copyToClipboardFallback;